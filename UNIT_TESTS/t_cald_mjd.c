
#include <stdio.h>
#include "t_assert.h"
#include "t_util.h"
#include "../caldate.h"

static const struct {
  struct caldate cd;
  long mjd;
} tests[] = {
  { { 0, 0, 0 }, -678973 },
  { { 1, 1, 1 }, -678575 },
  { { -1, -1, -1 }, -679369 },
  { { 1858, 11, 17 }, 0 },
  { { 1859, 2, 25 }, 100 },
  { { 1861, 8, 13 }, 1000 },
  { { 1886, 4, 4 }, 10000 },
  { { 2132, 9, 1 }, 100000 },
  { { 4596, 10, 13 }, 1000000 },

  /* automatically generated, do not edit */

  { { 379452255, 9, -5 }, 1152458071 },
  { { -911868703, 4, 4 }, 1953565486 },
  { { -1170388613, 0, -7 }, 2020387637 },
  { { -868670075, 8, -29 }, 551671277 },
  { { -959967162, 6, 24 }, 1565833339 },
  { { -1721286956, -1, 23 }, -1622604791 },
  { { -224412964, -6, -9 }, -361452545 },
  { { -2139370337, -10, 23 }, 294398308 },
  { { -474948184, -5, 22 }, -1673249359 },
  { { -767445687, 3, -5 }, -1131585982 },
  { { -305639251, 1, -27 }, 36026594 },
  { { 2104844056, 1, 14 }, -21319788 },
  { { 1394058338, -2, -15 }, -1932434756 },
  { { 197088779, 13, -11 }, -1029924256 },
  { { 1565380073, -9, 11 }, 512001709 },
  { { -1754733347, -13, -11 }, -953746767 },
  { { 1793594051, 5, 3 }, -2033899934 },
  { { -437891062, 7, 4 }, -1023315017 },
  { { 1424648492, -11, -25 }, 650454692 },
  { { 504632894, 5, 22 }, -370892740 },
  { { 1649821488, -9, -10 }, 1288824133 },
  { { 1376039690, -10, -6 }, 76323562 },
  { { -1494749287, 6, -3 }, -485798659 },
  { { -998946698, -12, 17 }, 213751495 },
  { { -1808400102, -12, 6 }, 919709998 },
  { { -1724383367, 13, -12 }, 1541422002 },
  { { 347308983, 2, 20 }, -1997696547 },
  { { 1145982181, -12, -28 }, 1948889666 },
  { { -1712958216, -1, -18 }, 1419404988 },
  { { 1368555792, 13, -13 }, 1637853935 },
  { { 1792888376, 5, -11 }, 2003324847 },
  { { -1248690460, -11, -25 }, -808971293 },
  { { -1209516122, 0, -9 }, 614260317 },
  { { 954012806, 12, 25 }, 552992737 },
  { { -1155085679, 12, -24 }, -980264736 },
  { { 366011169, 11, 17 }, 538169597 },
  { { 644535842, -1, 18 }, -811997993 },
  { { -81603154, -7, -8 }, 259151903 },
  { { 745836553, -6, 29 }, 1827588435 },
  { { -1238213418, 1, -11 }, -1277277196 },
  { { -94046613, 9, 1 }, 9239622 },
  { { -1642088859, -13, -20 }, 1534101968 },
  { { 340911498, -9, 12 }, -39363011 },
  { { -1149484444, -5, -8 }, 1065543836 },
  { { -234579427, -1, -9 }, 220290543 },
  { { -1000869010, -1, 25 }, -488358202 },
  { { -132239812, -3, -7 }, -1055638349 },
  { { 1221001011, -12, 23 }, -715816339 },
  { { 2137898710, -10, 21 }, -833257540 },
  { { 1729809272, -11, -5 }, 438991205 },
  { { 940285457, -5, -17 }, -165851794 },
  { { 1174112734, 12, 5 }, -661537955 },
  { { -252707037, 6, -25 }, -2105715561 },
  { { -1033841536, 8, -14 }, 353576093 },
  { { -1043437600, 3, 27 }, 1143652871 },
  { { -1690279853, -7, -17 }, 1112572211 },
  { { 1915562143, 2, 13 }, -435642131 },
  { { 896640646, -2, -22 }, 1073077595 },
  { { -1257496339, -8, -23 }, 269714836 },
  { { 540249630, 6, -23 }, -247048944 },
  { { 295565208, 11, 19 }, 578114465 },
  { { 1203797808, -11, 6 }, 1590777395 },
  { { -309446555, -12, -13 }, -1354563020 },
  { { -1092409356, -2, -3 }, 436955282 },
  { { -124551053, 2, 27 }, 1752623397 },
  { { 647195851, -2, -19 }, 159550276 },
  { { 2073700054, 12, 6 }, 1488469276 },
  { { 771898587, -9, -1 }, -1538351122 },
  { { 1396091810, -12, 23 }, -1189724625 },
  { { 1373373831, -2, 1 }, -897361196 },
  { { -1146884760, -11, 18 }, 2015058765 },
  { { -1495114742, -5, 19 }, -619278669 },
  { { -642319933, 5, 26 }, 1619984356 },
  { { 1025838104, 8, 6 }, 1016840225 },
  { { 1845515321, 2, -8 }, -249914760 },
  { { -1130246985, 7, -28 }, -498052792 },
  { { -160205507, -6, 8 }, 1615003107 },
  { { -544119671, 11, -21 }, -1167811978 },
  { { 9562371, -13, -4 }, -803062378 },
  { { -448292476, 2, -23 }, -527386352 },
  { { -25001871, 4, -1 }, -542490129 },
  { { -1555290852, 9, -4 }, -1123314642 },
  { { 146118253, -9, -12 }, 1828309210 },
  { { -457811960, -8, -19 }, 290660508 },
  { { 1922336117, -6, 12 }, 2038500822 },
  { { -1347138295, -7, -5 }, 1888401137 },
  { { 1733577422, 1, 24 }, 1815280125 },
  { { 1502078624, -4, -2 }, -1133541159 },
  { { 699820835, -7, 4 }, -2094405615 },
  { { -1652585252, 8, 5 }, 1995341108 },
  { { -1668646365, -8, -4 }, 424106843 },
  { { 204975849, 11, 25 }, 1850768884 },
  { { 12213897, -7, -20 }, 165387773 },
  { { -456365568, -8, -9 }, 818944348 },
  { { 635480543, 9, 22 }, 175589566 },
  { { -81085541, -7, -3 }, 448206174 },
  { { -304812174, 12, 1 }, 338110627 },
  { { 1703239731, 11, -22 }, -675399130 },
  { { -1594221486, 7, 8 }, 1837432403 },
  { { -266868767, -2, -16 }, 1311753128 },
  { { -6467003, 6, -24 }, 1932264139 },
  { { -1047279854, -6, -11 }, -259701897 },
  { { 768297296, 10, 5 }, 1441272232 },
  { { -399493196, -2, 10 }, 116315400 },
  { { 48881377, -3, 25 }, 673008117 },
  { { 142441798, -6, -11 }, 485511688 },
  { { -1240206227, -7, 22 }, -2005135949 },
  { { 1476228036, -6, 21 }, -1985339992 },
  { { -976835422, -8, -9 }, -300205277 },
  { { -501738135, -3, 28 }, 1426823920 },
  { { 803636280, 0, -2 }, 1463668895 },
  { { -2063116672, 11, 21 }, -1919292889 },
  { { -1433243200, -12, -24 }, 504001274 },
  { { 684701818, 5, 14 }, 973421785 },
  { { 70880405, -1, 22 }, 118053567 },
  { { -385400843, 2, -5 }, 968474453 },
  { { 477392735, 12, -2 }, -1730221733 },
  { { -1676065590, 12, 15 }, 2009258480 },
  { { -241373339, 0, -11 }, 2033832463 },
  { { -539872918, -6, 4 }, 383282212 },
  { { 660287840, 3, -6 }, 646333937 },
  { { -482007612, -2, 17 }, 43314893 },
  { { -212195621, -9, -28 }, -194127051 },
  { { 39216385, 8, -14 }, 1437909867 },
  { { -788943641, 10, 25 }, -393617610 },
  { { -1468632996, 3, -25 }, 463046051 },
  { { 810341166, -0, -0 }, -382389074 },
  { { 1336981053, 12, -25 }, -1304648126 },
  { { 12215, -11, 11 }, 3782141 },
  { { -7639, 12, 11 }, -3468684 },
  { { -1837, -1, 11 }, -1349942 },
  { { 336, -6, 23 }, -556412 },
  { { -11818, 3, 15 }, -4995303 },
  { { 8694, 9, 16 }, 2496736 },
  { { -2354, -2, -18 }, -1538832 },
  { { 18807, 5, -28 }, 6190266 },
  { { -9195, -6, -11 }, -4037571 },
  { { 31101, -0, 29 }, 10680463 },
  { { -22324, -6, 24 }, -8832805 },
  { { 23472, 12, -10 }, 7894355 },
  { { -3396, -8, -9 }, -1919590 },
  { { 28340, 10, -13 }, 9672291 },
  { { 29272, -2, 10 }, 10012355 },
  { { -22214, -13, -9 }, -8792873 },
  { { -28286, -3, -4 }, -11010317 },
  { { -30930, 2, 18 }, -11975843 },
  { { -31562, -9, -22 }, -12207053 },
  { { -15757, -4, -4 }, -6434225 },
  { { -23361, 11, -1 }, -9211069 },
  { { -28924, 11, -13 }, -11242924 },
  { { 20975, -8, -15 }, 6981730 },
  { { 26875, 11, 24 }, 9137279 },
  { { 4320, 7, 11 }, 899098 },
  { { 25849, -5, -21 }, 8762007 },
  { { 15617, 4, -1 }, 5025140 },
  { { -27705, -8, -0 }, -10798260 },
  { { -15519, -10, -7 }, -6347481 },
  { { 502, 6, -28 }, -495467 },
  { { 316, 5, 28 }, -563377 },
  { { 13036, -2, -19 }, 4082248 },
  { { -1743, -7, -11 }, -1315815 },
  { { -21483, 0, 5 }, -8525472 },
  { { -27820, 8, 9 }, -10839766 },
  { { 4858, -12, 4 }, 1095015 },
  { { 20455, 5, -2 }, 6792212 },
  { { 12899, -4, -2 }, 4032167 },
  { { -11579, -9, -0 }, -4908390 },
  { { 32069, 1, -22 }, 11033999 },
  { { -8045, 12, 2 }, -3616982 },
  { { 8727, -6, 8 }, 2508323 },
  { { -20458, 7, 23 }, -8150869 },
  { { -27548, 9, 18 }, -10740380 },
  { { 27489, -8, 15 }, 9360950 },
  { { -20239, -5, -2 }, -8071270 },
  { { 3918, -4, -13 }, 751912 },
  { { 12532, 7, -25 }, 3898434 },
  { { 21399, 11, 7 }, 7137194 },
  { { 17694, -8, -23 }, 5783362 },
  { { 31275, 0, 6 }, 10743993 },
  { { 26710, -12, 17 }, 9076306 },
  { { 28654, -11, -13 }, 9786339 },
  { { -26960, 6, 13 }, -10525715 },
  { { -12712, 7, -9 }, -5321731 },
  { { -26710, -10, -4 }, -10434906 },
  { { -19276, 6, 19 }, -7719186 },
  { { 4451, -13, 13 }, 946340 },
  { { 1008, 0, 11 }, -310798 },
  { { 11815, -6, 0 }, 3636184 },
  { { 17342, -9, -2 }, 5654786 },
  { { 19260, -7, 25 }, 6355409 },
  { { -25453, 9, 19 }, -9975197 },
  { { -1833, -0, -21 }, -1348483 },
  { { -30768, 9, 26 }, -11916453 },
  { { 16934, -3, 21 }, 5505974 },
  { { -8859, -12, 8 }, -3915014 },
  { { 4962, 3, 23 }, 1133474 },
  { { -31345, -4, 2 }, -12127619 },
  { { 26681, 6, -14 }, 9066231 },
  { { 7103, -5, -13 }, 1915178 },
  { { 5253, -9, 12 }, 1239384 },
  { { 20961, 5, -16 }, 6977011 },
  { { -6921, 11, 18 }, -3206463 },
  { { -8871, -4, 1 }, -3919160 },
  { { -32285, -6, 5 }, -12471005 },
  { { -14667, 11, 6 }, -6035643 },
  { { -12057, -6, -27 }, -5082912 },
  { { 21793, -11, -8 }, 7280415 },
  { { -23118, -6, 11 }, -9122820 },
  { { -3135, 6, 22 }, -1823803 },
  { { -25856, 12, -11 }, -10122328 },
  { { 21545, -11, -27 }, 7189815 },
  { { -17593, 13, -3 }, -7104291 },
  { { 8154, -11, -13 }, 2298868 },
  { { -19151, 7, -15 }, -7673534 },
  { { -3375, -8, 23 }, -1911887 },
  { { 4962, 5, -15 }, 1133497 },
  { { 23418, 5, -24 }, 7874403 },
  { { 20762, 0, -20 }, 6904172 },
  { { 22844, -3, -19 }, 7664517 },
  { { -12966, -13, -18 }, -5415120 },
  { { 6968, 12, 18 }, 1866421 },
  { { -13541, -11, 14 }, -5625041 },
  { { 5289, -2, 9 }, 1252744 },
  { { 16395, 11, 20 }, 5309533 },
  { { -27965, 0, 2 }, -10892977 },
  { { -23259, -6, 8 }, -9174323 },
  { { -7704, -11, 9 }, -3493126 },
  { { -31372, 4, -15 }, -12137254 },
  { { -3608, -6, 26 }, -1996925 },
  { { -8636, 11, 20 }, -3832851 },
  { { -16937, 2, -16 }, -6865039 },
  { { 8670, -12, -17 }, 2487298 },
  { { -27279, -3, 13 }, -10642501 },
  { { -8488, -13, 10 }, -3779537 },
  { { 1756, -10, 15 }, -37895 },
  { { -20034, 5, 9 }, -7996081 },
  { { 13754, -8, 22 }, 4344351 },
  { { 3918, 11, -25 }, 752357 },
  { { 27956, 5, -25 }, 9531873 },
  { { 28819, 7, -16 }, 9847147 },
  { { 29191, -6, -11 }, 9982627 },
  { { -19505, -2, 1 }, -7803087 },
  { { 13374, 0, 0 }, 4205781 },
  { { -5812, 2, -28 }, -2801728 },
  { { -14854, -8, 8 }, -6104521 },
  { { 24494, 1, 1 }, 8267310 },
  { { 8276, -1, 10 }, 2343754 },
  { { -26317, 8, -4 }, -10290820 },
  { { -32077, 10, -21 }, -12394574 },
  { { -27078, 12, 17 }, -10568627 },
  { { -7593, 2, 6 }, -3452191 },
  { { 8036, -12, -21 }, 2255730 },
  { { -23550, -8, 22 }, -9280655 },
  { { -29315, -4, 29 }, -11386149 },
  { { -1192, 12, -12 }, -1113988 },
  { { -23860, -1, -4 }, -9393693 },
  { { -1191, -4, 21 }, -1114077 },
  { { 1991, -9, 1 }, 47951 },
  { { 1418, 2, -13 }, -161010 },
  { { 1185, -4, -19 }, -246301 },
  { { 1238, 12, 1 }, -226436 },
  { { -596, -1, -27 }, -896715 },
  { { 805, 12, 5 }, -384582 },
  { { 574, 12, 23 }, -468935 },
  { { 951, -6, -27 }, -331837 },
  { { -1696, -7, -4 }, -1298643 },
  { { -577, -11, 15 }, -890037 },
  { { 1619, 4, -6 }, -87530 },
  { { 603, -2, 26 }, -458767 },
  { { 711, 4, -12 }, -419177 },
  { { 664, 11, -22 }, -436138 },
  { { -1445, -9, -17 }, -1207040 },
  { { 544, -9, -25 }, -480581 },
  { { -477, 12, -16 }, -852845 },
  { { -674, 7, -3 }, -924937 },
  { { 1055, -3, 6 }, -293727 },
  { { -130, 10, -11 }, -726161 },
  { { -396, 1, -12 }, -823590 },
  { { 656, -8, 10 }, -439608 },
  { { 81, -10, 17 }, -649674 },
  { { 1020, -6, -28 }, -306637 },
  { { -1522, 4, 13 }, -1234737 },
  { { -408, 7, 14 }, -827765 },
  { { 832, 1, -14 }, -375074 },
  { { -1995, 9, -20 }, -1407377 },
  { { 684, -9, -19 }, -429441 },
  { { 447, -7, -14 }, -515937 },
  { { -1337, -3, -9 }, -1167402 },
  { { 930, 9, -28 }, -339051 },
  { { -968, 12, 11 }, -1032151 },
  { { -916, 3, -21 }, -1013465 },
  { { -477, 1, -10 }, -853173 },
  { { -1060, 6, -16 }, -1065963 },
  { { 1755, 8, 12 }, -37717 },
  { { 1652, -8, -8 }, -75844 },
  { { 1735, 5, -27 }, -45153 },
  { { -448, 7, -15 }, -842404 },
  { { -416, -4, -14 }, -831050 },
  { { 1214, 12, 0 }, -235203 },
  { { -1962, 12, -22 }, -1395235 },
  { { 1353, -11, 13 }, -185121 },
  { { 2044, -6, 15 }, 67415 },
  { { 1862, 0, 27 }, 1136 },
  { { -1450, -0, 18 }, -1208556 },
  { { 1444, -4, 26 }, -151659 },
  { { -1991, -3, -22 }, -1406283 },
  { { -1709, -6, -4 }, -1303359 },
  { { 964, 4, 8 }, -326749 },
  { { 149, 12, 6 }, -624180 },
  { { -1026, 5, -6 }, -1053566 },
  { { -1988, -3, -20 }, -1405186 },
  { { 1546, -13, -0 }, -114703 },
  { { 1533, -10, -14 }, -119374 },
  { { -1359, 11, 21 }, -1174981 },
  { { 15, -8, 19 }, -673719 },
  { { -7, 6, 22 }, -681325 },
  { { 1359, -0, 5 }, -182603 },
  { { 857, -8, 20 }, -366183 },
  { { -634, 6, -21 }, -910375 },
  { { 980, 1, 13 }, -320991 },
  { { -310, -8, -7 }, -792448 },
  { { -216, -7, -1 }, -758080 },
  { { -529, 4, 25 }, -872040 },
  { { 1000, -1, -6 }, -313766 },
  { { 1017, 11, -22 }, -307208 },
  { { -787, 3, 26 }, -966302 },
  { { 516, -11, 15 }, -490827 },
  { { 1874, 7, -1 }, 5703 },
  { { -102, 1, -27 }, -716223 },
  { { 1923, -7, 9 }, 23183 },
  { { 464, 1, 5 }, -509464 },
  { { -1121, 5, 11 }, -1088247 },
  { { 521, -4, 26 }, -488777 },
  { { -2003, 4, -8 }, -1410440 },
  { { -819, -3, 10 }, -978187 },
  { { -1378, -5, 26 }, -1182404 },
  { { -199, -10, 8 }, -751951 },
  { { 1099, -9, 9 }, -277837 },
  { { 487, -8, -6 }, -501349 },
  { { 1334, 11, -9 }, -191413 },
  { { -1693, -3, 16 }, -1297404 },
  { { -988, 11, 24 }, -1039473 },
  { { 399, -1, 14 }, -533257 },
  { { 1690, -4, 14 }, -61820 },
  { { 158, -13, -12 }, -621671 },
  { { -1489, -2, 29 }, -1222851 },
  { { -1796, 1, -1 }, -1334919 },
  { { -1070, 6, 2 }, -1069598 },
  { { 687, 10, 5 }, -427742 },
  { { 456, -2, -14 }, -512497 },
  { { 60, 1, 18 }, -657009 },
  { { -855, 9, -13 }, -990994 },
  { { 1695, -3, -22 }, -59999 },
  { { 90, -0, 3 }, -646097 },
  { { -400, -2, -7 }, -825138 },
  { { 443, 5, 16 }, -517003 },
  { { -381, 6, 3 }, -817945 },
  { { 1395, -6, -22 }, -169664 },
  { { -1013, -10, -2 }, -1049268 },
  { { 941, 6, 7 }, -335090 },
  { { 63, -2, -3 }, -656026 },
  { { -1394, 6, -19 }, -1187958 },
  { { -1462, 12, 3 }, -1212589 },
  { { 3, -4, 23 }, -677976 },
  { { -565, 5, -2 }, -885186 },
  { { -1375, -6, -10 }, -1181374 },
  { { 158, 11, 4 }, -620925 },
  { { -1462, 5, 10 }, -1212796 },
  { { 400, -2, 14 }, -532923 },
  { { -777, -6, -13 }, -962962 },
  { { -1210, 4, 7 }, -1120788 },
  { { -1536, 10, -5 }, -1239685 },
  { { 491, 7, -1 }, -499427 },
  { { 690, -1, -10 }, -426995 },
  { { -226, -4, -10 }, -761649 },
  { { -1764, -10, 23 }, -1323541 },
  { { 782, -9, -12 }, -393640 },
  { { -1363, 3, 23 }, -1176685 },
  { { 373, 6, -12 }, -542567 },
  { { -2045, 1, 28 }, -1425835 },
  { { 1174, -0, 23 }, -250155 },
  { { 769, -1, 16 }, -398115 },
  { { -454, 3, -5 }, -844708 },
  { { -1551, -12, -12 }, -1245841 },
};

int main(void)
{
  unsigned long ind;
  long mjd;

  test_assert_verbose = 0;
  for (ind = 0; ind < sizeof(tests) / sizeof(tests[0]); ++ind) {
    mjd = caldate_mjd(&tests[ind].cd);
    printf("[%lu] %ld %d %d %ld (%ld)\n",
             ind, tests[ind].cd.year, tests[ind].cd.month, tests[ind].cd.day, tests[ind].mjd, mjd);
    test_assert(mjd == tests[ind].mjd);
  }

  return 0;
}
